<link rel='import' href='../../bower_components/polymer/polymer-element.html'>
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../nav-bar/nav-bar.html">
<link rel="import" href="../user-list/user-list.html">
<dom-module id='seed-app'>
    <template>
        <style include='shared-styles'>
        </style>
        
        <div class="flex flex--col wrapper">
            <div class="flex__item">
                <nav-bar bar-title="Chat Training"></nav-bar>
            </div>
            <div class="flex__item flex flex--row">
                <div class="flex__item">
                    <button on-click='_test'>test</button>{{socket.username}}
                    <ul>
                        <template is="dom-repeat" items="{{userList}}">
                            <li>{{item.username}}</li>
                        </template>
                    </ul>
                </div>
                <div class="flex__item">
                    <user-list user-list={{userList}}></user-list>
                </div>
            </div>

    </template>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script>
        class SeedApp extends Polymer.Element {
            static get is() {
                return 'seed-app'
            }
            static get properties() {
                return {
                    userList: {
                        type: Array,
                        value: [],
                        notify: true
                    }
                }
            }
            ready() {
                super.ready();
                io.connect('http://localhost:3000');
            }
            _test() {
                this.push('userList', { username: 'NeitoFR' });
                console.log(this.userList);
            }
        }
        window.customElements.define(SeedApp.is, SeedApp);
    </script>
</dom-module>